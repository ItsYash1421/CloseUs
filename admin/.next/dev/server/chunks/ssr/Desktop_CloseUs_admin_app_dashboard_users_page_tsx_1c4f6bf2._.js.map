{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashkumarmeena/Desktop/CloseUs/admin/app/dashboard/users/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { apiClient } from '@/lib/api';\n\nexport default function UsersPage() {\n    const { token } = useAuth();\n    const [users, setUsers] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [search, setSearch] = useState('');\n    const [page, setPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(1);\n\n    useEffect(() => {\n        console.log('Users page - token:', token);\n        fetchUsers();\n    }, [token, page, search]);\n\n    const fetchUsers = async () => {\n        console.log('fetchUsers called, token:', token);\n        if (!token) {\n            console.log('No token found, skipping API call');\n            setLoading(false);\n            return;\n        }\n\n        setLoading(true);\n        try {\n            const response = await apiClient.get(\n                `/admin/users?page=${page}&limit=20&search=${search}`,\n                token\n            );\n            console.log('Users response:', response);\n            setUsers(response.data.users);\n            setTotalPages(response.data.pagination.pages);\n        } catch (error) {\n            console.error('Failed to fetch users:', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const formatDate = (date: string) => {\n        return new Date(date).toLocaleDateString('en-US', {\n            year: 'numeric',\n            month: 'short',\n            day: 'numeric',\n        });\n    };\n\n    return (\n        <div>\n            <div className=\"flex justify-between items-center mb-6\">\n                <h1 className=\"text-3xl font-bold text-gray-900\">Users Management</h1>\n            </div>\n\n            {/* Search */}\n            <div className=\"card mb-6\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Search by name or email...\"\n                    value={search}\n                    onChange={(e) => setSearch(e.target.value)}\n                    className=\"input\"\n                />\n            </div>\n\n            {/* Users Table */}\n            <div className=\"card overflow-x-auto\">\n                {loading ? (\n                    <div className=\"flex justify-center py-12\">\n                        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n                    </div>\n                ) : (\n                    <>\n                        <table className=\"table\">\n                            <thead>\n                                <tr>\n                                    <th>Name</th>\n                                    <th>Email</th>\n                                    <th>Phone</th>\n                                    <th>Couple Status</th>\n                                    <th>Couple Tag</th>\n                                    <th>Joined</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {users.map((user) => (\n                                    <tr key={user._id}>\n                                        <td className=\"font-medium\">{user.name || 'N/A'}</td>\n                                        <td>{user.email}</td>\n                                        <td>{user.phone || 'N/A'}</td>\n                                        <td>\n                                            {user.coupleId?.isPaired ? (\n                                                <span className=\"badge badge-success\">Paired</span>\n                                            ) : (\n                                                <span className=\"badge badge-warning\">Unpaired</span>\n                                            )}\n                                        </td>\n                                        <td>\n                                            {user.coupleId?.coupleTag || '-'}\n                                        </td>\n                                        <td className=\"text-gray-500\">\n                                            {formatDate(user.createdAt)}\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n\n                        {/* Pagination */}\n                        <div className=\"flex justify-between items-center mt-6 pt-4 border-t\">\n                            <p className=\"text-sm text-gray-600\">\n                                Page {page} of {totalPages}\n                            </p>\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={() => setPage(page - 1)}\n                                    disabled={page === 1}\n                                    className=\"btn-secondary disabled:opacity-50\"\n                                >\n                                    Previous\n                                </button>\n                                <button\n                                    onClick={() => setPage(page + 1)}\n                                    disabled={page === totalPages}\n                                    className=\"btn-secondary disabled:opacity-50\"\n                                >\n                                    Next\n                                </button>\n                            </div>\n                        </div>\n                    </>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}
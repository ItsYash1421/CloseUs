{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashkumarmeena/Desktop/CloseUs/admin/lib/api.ts"],"sourcesContent":["const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000/api';\n\nconst handleTokenExpiration = () => {\n    if (typeof window !== 'undefined') {\n        localStorage.removeItem('admin_token');\n        alert('Your token has expired. Please login again.');\n        window.location.href = '/login';\n    }\n};\n\nexport const apiClient = {\n    get: async (endpoint: string, token?: string) => {\n        const headers: HeadersInit = {\n            'Content-Type': 'application/json',\n        };\n        if (token) {\n            headers['Authorization'] = `Bearer ${token}`;\n        }\n\n        console.log('API GET:', `${API_BASE_URL}${endpoint}`);\n\n        const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n            method: 'GET',\n            headers,\n        });\n\n        console.log('Response status:', response.status);\n\n        if (!response.ok) {\n            if (response.status === 401) {\n                handleTokenExpiration();\n                throw new Error('Token expired');\n            }\n            const error = await response.text();\n            console.error('API Error:', error);\n            throw new Error(`API Error: ${response.statusText}`);\n        }\n\n        return response.json();\n    },\n\n    post: async (endpoint: string, data: any, token?: string) => {\n        const headers: HeadersInit = {\n            'Content-Type': 'application/json',\n        };\n        if (token) {\n            headers['Authorization'] = `Bearer ${token}`;\n        }\n\n        const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n            method: 'POST',\n            headers,\n            body: JSON.stringify(data),\n        });\n\n        if (!response.ok) {\n            if (response.status === 401) {\n                handleTokenExpiration();\n                throw new Error('Token expired');\n            }\n            throw new Error(`API Error: ${response.statusText}`);\n        }\n\n        return response.json();\n    },\n\n    put: async (endpoint: string, data: any, token?: string) => {\n        const headers: HeadersInit = {\n            'Content-Type': 'application/json',\n        };\n        if (token) {\n            headers['Authorization'] = `Bearer ${token}`;\n        }\n\n        const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n            method: 'PUT',\n            headers,\n            body: JSON.stringify(data),\n        });\n\n        if (!response.ok) {\n            if (response.status === 401) {\n                handleTokenExpiration();\n                throw new Error('Token expired');\n            }\n            throw new Error(`API Error: ${response.statusText}`);\n        }\n\n        return response.json();\n    },\n\n    delete: async (endpoint: string, token?: string) => {\n        const headers: HeadersInit = {\n            'Content-Type': 'application/json',\n        };\n        if (token) {\n            headers['Authorization'] = `Bearer ${token}`;\n        }\n\n        const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n            method: 'DELETE',\n            headers,\n        });\n\n        if (!response.ok) {\n            if (response.status === 401) {\n                handleTokenExpiration();\n                throw new Error('Token expired');\n            }\n            throw new Error(`API Error: ${response.statusText}`);\n        }\n\n        return response.json();\n    },\n};\n"],"names":[],"mappings":";;;;AAAqB;AAArB,MAAM,eAAe,iEAAmC;AAExD,MAAM,wBAAwB;IAC1B,wCAAmC;QAC/B,aAAa,UAAU,CAAC;QACxB,MAAM;QACN,OAAO,QAAQ,CAAC,IAAI,GAAG;IAC3B;AACJ;AAEO,MAAM,YAAY;IACrB,KAAK,OAAO,UAAkB;QAC1B,MAAM,UAAuB;YACzB,gBAAgB;QACpB;QACA,IAAI,OAAO;YACP,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QAChD;QAEA,QAAQ,GAAG,CAAC,YAAY,GAAG,eAAe,UAAU;QAEpD,MAAM,WAAW,MAAM,MAAM,GAAG,eAAe,UAAU,EAAE;YACvD,QAAQ;YACR;QACJ;QAEA,QAAQ,GAAG,CAAC,oBAAoB,SAAS,MAAM;QAE/C,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,IAAI,SAAS,MAAM,KAAK,KAAK;gBACzB;gBACA,MAAM,IAAI,MAAM;YACpB;YACA,MAAM,QAAQ,MAAM,SAAS,IAAI;YACjC,QAAQ,KAAK,CAAC,cAAc;YAC5B,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,SAAS,UAAU,EAAE;QACvD;QAEA,OAAO,SAAS,IAAI;IACxB;IAEA,MAAM,OAAO,UAAkB,MAAW;QACtC,MAAM,UAAuB;YACzB,gBAAgB;QACpB;QACA,IAAI,OAAO;YACP,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QAChD;QAEA,MAAM,WAAW,MAAM,MAAM,GAAG,eAAe,UAAU,EAAE;YACvD,QAAQ;YACR;YACA,MAAM,KAAK,SAAS,CAAC;QACzB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,IAAI,SAAS,MAAM,KAAK,KAAK;gBACzB;gBACA,MAAM,IAAI,MAAM;YACpB;YACA,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,SAAS,UAAU,EAAE;QACvD;QAEA,OAAO,SAAS,IAAI;IACxB;IAEA,KAAK,OAAO,UAAkB,MAAW;QACrC,MAAM,UAAuB;YACzB,gBAAgB;QACpB;QACA,IAAI,OAAO;YACP,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QAChD;QAEA,MAAM,WAAW,MAAM,MAAM,GAAG,eAAe,UAAU,EAAE;YACvD,QAAQ;YACR;YACA,MAAM,KAAK,SAAS,CAAC;QACzB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,IAAI,SAAS,MAAM,KAAK,KAAK;gBACzB;gBACA,MAAM,IAAI,MAAM;YACpB;YACA,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,SAAS,UAAU,EAAE;QACvD;QAEA,OAAO,SAAS,IAAI;IACxB;IAEA,QAAQ,OAAO,UAAkB;QAC7B,MAAM,UAAuB;YACzB,gBAAgB;QACpB;QACA,IAAI,OAAO;YACP,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;QAChD;QAEA,MAAM,WAAW,MAAM,MAAM,GAAG,eAAe,UAAU,EAAE;YACvD,QAAQ;YACR;QACJ;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,IAAI,SAAS,MAAM,KAAK,KAAK;gBACzB;gBACA,MAAM,IAAI,MAAM;YACpB;YACA,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,SAAS,UAAU,EAAE;QACvD;QAEA,OAAO,SAAS,IAAI;IACxB;AACJ"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashkumarmeena/Desktop/CloseUs/admin/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { apiClient } from '@/lib/api';\n\ninterface AuthContextType {\n    token: string | null;\n    admin: any | null;\n    login: (email: string, password: string) => Promise<void>;\n    logout: () => void;\n    isLoading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n    const [token, setToken] = useState<string | null>(null);\n    const [admin, setAdmin] = useState<any | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        // Check for saved token\n        const savedToken = localStorage.getItem('admin_token');\n        if (savedToken) {\n            setToken(savedToken);\n            // Fetch admin profile\n            apiClient\n                .get('/admin/auth/me', savedToken)\n                .then((response) => {\n                    setAdmin(response.data);\n                })\n                .catch(() => {\n                    localStorage.removeItem('admin_token');\n                    setToken(null);\n                })\n                .finally(() => setIsLoading(false));\n        } else {\n            setIsLoading(false);\n        }\n    }, []);\n\n    const login = async (email: string, password: string) => {\n        const response = await apiClient.post('/admin/auth/login', { email, password });\n        const { token: newToken, admin: adminData } = response.data;\n\n        setToken(newToken);\n        setAdmin(adminData);\n        localStorage.setItem('admin_token', newToken);\n    };\n\n    const logout = () => {\n        setToken(null);\n        setAdmin(null);\n        localStorage.removeItem('admin_token');\n    };\n\n    return (\n        <AuthContext.Provider value={{ token, admin, login, logout, isLoading }}>\n            {children}\n        </AuthContext.Provider>\n    );\n}\n\nexport function useAuth() {\n    const context = useContext(AuthContext);\n    if (context === undefined) {\n        throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;AAHA;;;AAaA,MAAM,4BAAc,IAAA,6MAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAC9D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wMAAQ,EAAgB;IAClD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wMAAQ,EAAa;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,wMAAQ,EAAC;IAE3C,IAAA,yMAAS;kCAAC;YACN,wBAAwB;YACxB,MAAM,aAAa,aAAa,OAAO,CAAC;YACxC,IAAI,YAAY;gBACZ,SAAS;gBACT,sBAAsB;gBACtB,yJAAS,CACJ,GAAG,CAAC,kBAAkB,YACtB,IAAI;8CAAC,CAAC;wBACH,SAAS,SAAS,IAAI;oBAC1B;6CACC,KAAK;8CAAC;wBACH,aAAa,UAAU,CAAC;wBACxB,SAAS;oBACb;6CACC,OAAO;8CAAC,IAAM,aAAa;;YACpC,OAAO;gBACH,aAAa;YACjB;QACJ;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAChC,MAAM,WAAW,MAAM,yJAAS,CAAC,IAAI,CAAC,qBAAqB;YAAE;YAAO;QAAS;QAC7E,MAAM,EAAE,OAAO,QAAQ,EAAE,OAAO,SAAS,EAAE,GAAG,SAAS,IAAI;QAE3D,SAAS;QACT,SAAS;QACT,aAAa,OAAO,CAAC,eAAe;IACxC;IAEA,MAAM,SAAS;QACX,SAAS;QACT,SAAS;QACT,aAAa,UAAU,CAAC;IAC5B;IAEA,qBACI,4NAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAO;YAAO;YAAQ;QAAU;kBACjE;;;;;;AAGb;GA9CgB;KAAA;AAgDT,SAAS;;IACZ,MAAM,UAAU,IAAA,0MAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;IANgB"}}]
}
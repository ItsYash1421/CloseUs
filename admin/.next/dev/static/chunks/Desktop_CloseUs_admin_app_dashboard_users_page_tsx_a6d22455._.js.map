{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashkumarmeena/Desktop/CloseUs/admin/app/dashboard/users/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { apiClient } from '@/lib/api';\n\nexport default function UsersPage() {\n    const { token } = useAuth();\n    const [users, setUsers] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [search, setSearch] = useState('');\n    const [page, setPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(1);\n\n    useEffect(() => {\n        console.log('Users page - token:', token);\n        fetchUsers();\n    }, [token, page, search]);\n\n    const fetchUsers = async () => {\n        console.log('fetchUsers called, token:', token);\n        if (!token) {\n            console.log('No token found, skipping API call');\n            setLoading(false);\n            return;\n        }\n\n        setLoading(true);\n        try {\n            const response = await apiClient.get(\n                `/admin/dashboard/users?page=${page}&limit=20&search=${search}`,\n                token\n            );\n            console.log('Users response:', response);\n            setUsers(response.data.users || []);\n            setTotalPages(response.data.pagination?.pages || 1);\n        } catch (error) {\n            console.error('Failed to fetch users:', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const formatDate = (date: string) => {\n        return new Date(date).toLocaleDateString('en-US', {\n            year: 'numeric',\n            month: 'short',\n            day: 'numeric',\n        });\n    };\n\n    return (\n        <div>\n            <div className=\"flex justify-between items-center mb-6\">\n                <h1 className=\"text-3xl font-bold text-gray-900\">Users Management</h1>\n            </div>\n\n            {/* Search */}\n            <div className=\"card mb-6\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Search by name or email...\"\n                    value={search}\n                    onChange={(e) => setSearch(e.target.value)}\n                    className=\"input\"\n                />\n            </div>\n\n            {/* Users Table */}\n            <div className=\"card overflow-x-auto\">\n                {loading ? (\n                    <div className=\"flex justify-center py-12\">\n                        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n                    </div>\n                ) : (\n                    <>\n                        <table className=\"table\">\n                            <thead>\n                                <tr>\n                                    <th>Name</th>\n                                    <th>Email</th>\n                                    <th>Phone</th>\n                                    <th>Couple Status</th>\n                                    <th>Couple Tag</th>\n                                    <th>Joined</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {users.map((user) => (\n                                    <tr key={user._id}>\n                                        <td className=\"font-medium\">{user.name || 'N/A'}</td>\n                                        <td>{user.email}</td>\n                                        <td>{user.phone || 'N/A'}</td>\n                                        <td>\n                                            {user.coupleId?.isPaired ? (\n                                                <span className=\"badge badge-success\">Paired</span>\n                                            ) : (\n                                                <span className=\"badge badge-warning\">\n                                                    Unpaired\n                                                </span>\n                                            )}\n                                        </td>\n                                        <td>{user.coupleId?.coupleTag || '-'}</td>\n                                        <td className=\"text-gray-500\">\n                                            {formatDate(user.createdAt)}\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n\n                        {/* Pagination */}\n                        <div className=\"flex justify-between items-center mt-6 pt-4 border-t\">\n                            <p className=\"text-sm text-gray-600\">\n                                Page {page} of {totalPages}\n                            </p>\n                            <div className=\"flex gap-2\">\n                                <button\n                                    onClick={() => setPage(page - 1)}\n                                    disabled={page === 1}\n                                    className=\"btn-secondary disabled:opacity-50\"\n                                >\n                                    Previous\n                                </button>\n                                <button\n                                    onClick={() => setPage(page + 1)}\n                                    disabled={page === totalPages}\n                                    className=\"btn-secondary disabled:opacity-50\"\n                                >\n                                    Next\n                                </button>\n                            </div>\n                        </div>\n                    </>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}